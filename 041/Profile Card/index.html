<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Card</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="body">
<div class="pc-card-wrapper" id="wrap">
    <div class="pc-card" id="card">
        <div class="pc-inside"></div>
        <div class="pc-shine"></div>
        <div class="pc-glare"></div>

        <div class="pc-avatar-content">
            <img class="avatar" src="../../assets/icons/pro.png" alt="avatar" />
        </div>

        <div class="pc-content">
            <div class="pc-details">
                <h3>Aida Heidari</h3>
                <p>Software Engineer</p>
            </div>
        </div>

        <a class="pc-user-info" href="mailto:eyeedev@gmail.com">
            <div class="pc-user-details">
                <div class="pc-mini-avatar">
                    <img src="../../assets/icons/pro.jpg" alt="mini-avatar" />
                </div>
                <div class="pc-user-text">
                    <span class="pc-handle">@eyeedev</span>
                    <div class="online-status">
                        <span class="status-dot"></span>
                        <span id="statusText">Online</span>
                    </div>
                </div>
            </div>
            <button class="pc-contact-btn">Contact Me</button>
        </a>
    </div>
</div>

<script>
    const wrap = document.getElementById("wrap");
    const card = document.getElementById("card");

    function clamp(v, min = 0, max = 100) {
        return Math.min(Math.max(v, min), max);
    }

    function round(v, p = 3) {
        return parseFloat(v.toFixed(p));
    }

    function adjust(value, fromMin, fromMax, toMin, toMax) {
        return round(toMin + ((toMax - toMin) * (value - fromMin)) / (fromMax - fromMin));
    }

    function updateCardTransform(offsetX, offsetY) {
        const width = card.clientWidth;
        const height = card.clientHeight;

        const percentX = clamp((100 / width) * offsetX);
        const percentY = clamp((100 / height) * offsetY);

        const centerX = percentX - 50;
        const centerY = percentY - 50;

        const properties = {
            "--pointer-x": `${percentX}%`,
            "--pointer-y": `${percentY}%`,
            "--background-x": `${adjust(percentX, 0, 100, 35, 65)}%`,
            "--background-y": `${adjust(percentY, 0, 100, 35, 65)}%`,
            "--pointer-from-center": `${clamp(Math.hypot(percentY - 50, percentX - 50) / 50, 0, 1)}`,
            "--pointer-from-top": `${percentY / 100}`,
            "--pointer-from-left": `${percentX / 100}`,
            "--rotate-x": `${round(-(centerX / 5))}deg`,
            "--rotate-y": `${round(centerY / 4)}deg`,
        };

        Object.entries(properties).forEach(([property, value]) => {
            wrap.style.setProperty(property, value);
        });
    }

    function easeInOutCubic(x) {
        return x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;
    }

    function createSmoothAnimation(duration, startX, startY) {
        const startTime = performance.now();
        const targetX = wrap.clientWidth / 2;
        const targetY = wrap.clientHeight / 2;

        function loop(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = clamp(elapsed / duration);
            const eased = easeInOutCubic(progress);

            const currentX = adjust(eased, 0, 1, startX, targetX);
            const currentY = adjust(eased, 0, 1, startY, targetY);

            updateCardTransform(currentX, currentY);

            if (progress < 1) {
                requestAnimationFrame(loop);
            }
        }
        requestAnimationFrame(loop);
    }

    card.addEventListener("pointermove", (e) => {
        const rect = card.getBoundingClientRect();
        updateCardTransform(e.clientX - rect.left, e.clientY - rect.top);
    });

    card.addEventListener("pointerenter", () => {
        wrap.classList.add("active");
        card.classList.add("active");
    });

    card.addEventListener("pointerleave", (e) => {
        wrap.classList.remove("active");
        card.classList.remove("active");
        createSmoothAnimation(600, e.offsetX, e.offsetY);
    });

    // Initial animation
    const initialX = wrap.clientWidth - 70;
    const initialY = 60;
    updateCardTransform(initialX, initialY);
    createSmoothAnimation(1500, initialX, initialY);
</script>
</body>
</html>

